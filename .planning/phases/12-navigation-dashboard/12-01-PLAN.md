---
phase: 12-navigation-dashboard
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/Navigation.tsx
  - app/dashboard/page.tsx
autonomous: true

must_haves:
  truths:
    - "User sees persistent navigation bar on Templates page"
    - "User sees persistent navigation bar on Checklists page"
    - "Navigation bar highlights current section (Templates vs Checklists as active)"
    - "User can navigate from Templates to Checklists and vice versa via navigation bar"
    - "Dashboard page displays recent checklists with progress indicators"
    - "Dashboard displays quick action buttons for Create Checklist and Create Template"
  artifacts:
    - path: "app/components/Navigation.tsx"
      provides: "Persistent header with Templates/Checklists links and active state highlighting"
      exports: ["Navigation component"]
      min_lines: 50
    - path: "app/dashboard/page.tsx"
      provides: "Dashboard home page showing recent checklists and quick actions"
      exports: ["Dashboard page component"]
      min_lines: 150
  key_links:
    - from: "app/components/Navigation.tsx"
      to: "next/navigation"
      via: "usePathname() for active link detection"
      pattern: "usePathname|/templates|/checklists"
    - from: "app/dashboard/page.tsx"
      to: "/api/checklists"
      via: "fetch in useEffect on mount"
      pattern: "fetch.*api/checklists"
    - from: "app/dashboard/page.tsx"
      to: "app/components/Navigation"
      via: "import and render Navigation"
      pattern: "import.*Navigation"
---

<objective>
Create persistent navigation bar component and dashboard home page showing recent checklists.

Purpose: Users have clear navigation between sections (Templates, Checklists) and a dashboard home page with recent activity and quick actions. Navigation persists on all authenticated pages and highlights the current section.

Output:
1. Navigation.tsx component with active state highlighting for Templates/Checklists links
2. Dashboard page at /dashboard showing recent checklists with progress, Create buttons
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

# Reference Phase 11 summary for UI patterns and export feature context
@.planning/phases/11-template-export/11-01-SUMMARY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create persistent Navigation component with active state highlighting</name>
  <files>app/components/Navigation.tsx</files>
  <action>Create a new Navigation component that:
  - Is "use client" component
  - Uses usePathname() from next/navigation to detect current page
  - Displays a top navigation bar with:
    * App title/logo on left
    * Links to /templates (text: "Templates") and /checklists (text: "Checklists")
    * Active state highlighting: if pathname starts with /templates, Templates link is highlighted (use bg-blue-600 text-white), if starts with /checklists, Checklists link is highlighted
    * Inactive links use gray background (bg-gray-100 dark:bg-gray-700)
  - Exports default Navigation component
  - Dark mode support with dark: prefix for all colors
  - Use Tailwind classes matching existing codebase style (see app/templates/page.tsx for patterns)
  - Style as a header bar with padding and flex layout
  - Do NOT include logout button here (that goes in a separate task later)
  </action>
  <verify>grep -n "usePathname" app/components/Navigation.tsx && grep -n "Templates" app/components/Navigation.tsx && grep -n "Checklists" app/components/Navigation.tsx</verify>
  <done>Navigation.tsx exists with usePathname hook, displays Templates and Checklists links with dark mode support, highlights active section with bg-blue-600</done>
</task>

<task type="auto">
  <name>Task 2: Create Dashboard page with recent checklists and quick actions</name>
  <files>app/dashboard/page.tsx</files>
  <action>Create a new Dashboard page that:
  - Is "use client" component
  - Uses useSession() and useRouter() for auth protection (redirect unauthenticated users to /login)
  - Fetches recent checklists from /api/checklists on mount with useEffect
  - Displays:
    * Heading "Dashboard" or "My Checklists"
    * If no checklists: empty state message "No active checklists yet" with "Create from Templates" button linking to /checklists/new
    * If checklists exist: Grid of recent checklists (same card layout as /checklists page)
      - Shows checklist name, progress bar with completed/total items, created date
      - Link to /checklists/[id] to open checklist
      - Delete button with confirmation
    * Two quick action buttons at top:
      - "Create Checklist" linking to /checklists/new
      - "Create Template" linking to /templates/new
  - Copy UI patterns from app/checklists/page.tsx for consistency (grid layout, card styling, progress bar)
  - Dark mode support throughout
  - Error handling for failed fetch (show error message)
  - Loading state while fetching
  </action>
  <verify>grep -n "useSession" app/dashboard/page.tsx && grep -n "/api/checklists" app/dashboard/page.tsx && grep -n "Create from Templates" app/dashboard/page.tsx</verify>
  <done>Dashboard page exists at app/dashboard/page.tsx, shows recent checklists with progress indicators and quick action buttons, has auth protection and loading/error states</done>
</task>

</tasks>

<verification>
After both tasks complete:
1. Navigation component renders without errors and exports properly
2. Dashboard page renders without errors and fetches checklists
3. Navigation has proper active state switching based on pathname
4. Dashboard has empty state and populated state UI
5. Both components use dark mode classes
6. No TypeScript errors in either file
</verification>

<success_criteria>
- [ ] Navigation.tsx created with usePathname() active state logic
- [ ] Navigation shows Templates and Checklists links with proper styling
- [ ] Dashboard page created at /dashboard
- [ ] Dashboard fetches and displays recent checklists
- [ ] Dashboard has empty state with call-to-action
- [ ] Dashboard has quick action buttons for Create Checklist and Create Template
- [ ] Both components have dark mode support
- [ ] No TypeScript errors
- [ ] Both components follow existing codebase patterns from phase 5-11
</success_criteria>

<output>
After completion, create `.planning/phases/12-navigation-dashboard/12-01-SUMMARY.md`
</output>
