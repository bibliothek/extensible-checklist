---
phase: 05-power-user-ux
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - app/components/TemplateForm.tsx
autonomous: true

must_haves:
  truths:
    - "User can toggle to bulk text mode when creating a template"
    - "User can toggle to bulk text mode when editing a template"
    - "In bulk text mode, pasting multi-line text creates multiple items"
    - "Each line in bulk text mode becomes one item"
    - "Empty lines are ignored during parsing"
    - "Switching back to individual mode preserves all items"
  artifacts:
    - path: "app/components/TemplateForm.tsx"
      provides: "Bulk text mode toggle and textarea UI"
      min_lines: 300
      exports: ["default TemplateForm"]
  key_links:
    - from: "TemplateForm toggle state"
      to: "UI rendering (textarea vs individual inputs)"
      via: "conditional rendering based on isBulkMode state"
      pattern: "isBulkMode.*textarea.*input"
    - from: "textarea onChange"
      to: "items state array"
      via: "text parsing splits by newline"
      pattern: "split.*\\n.*filter.*trim"
---

<objective>
Add bulk text editing mode to template creation and editing, enabling users to paste multiple checklist items at once instead of adding them one-by-one.

Purpose: Power users building templates with many items can paste from existing documents or batch-enter items, dramatically reducing template creation friction.

Output: Modified TemplateForm component with toggle between individual item mode (current) and bulk text mode (new).
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@app/components/TemplateForm.tsx
</context>

<tasks>

<task type="auto">
  <name>Add bulk text mode toggle and parsing logic</name>
  <files>app/components/TemplateForm.tsx</files>
  <action>
Modify TemplateForm component to support two editing modes: individual (current) and bulk text (new).

**Add state:**
- `isBulkMode: boolean` (default: false) - toggles between modes
- `bulkText: string` - stores textarea content in bulk mode

**Add toggle button:**
- Position above item list/textarea area
- Label: "Switch to Bulk Text Mode" / "Switch to Individual Mode"
- onClick: toggle isBulkMode state and sync data between modes

**Mode switching logic:**
When switching FROM individual TO bulk:
- Convert items array to text: join item.text with newlines
- Set bulkText state with joined text
- User sees textarea with all items as text

When switching FROM bulk TO individual:
- Parse bulkText: split by newline, trim each line, filter empty lines
- Create items array with sequential order (0, 1, 2...)
- Preserve existing item IDs if text matches, generate new IDs for new items
- User sees individual input fields

**Bulk mode UI (when isBulkMode === true):**
- Replace item list with textarea
- Textarea:
  - rows={15} for comfortable editing
  - placeholder: "Enter one item per line. Empty lines will be ignored."
  - value={bulkText}
  - onChange updates bulkText state
- Add helper text below textarea: "Each line becomes one checklist item"

**Individual mode UI (when isBulkMode === false):**
- Keep existing UI: newItemText input, Add Item button, individual item inputs with up/down/remove
- No changes to current functionality

**Parsing requirements:**
- Split by \n (newline)
- Trim whitespace from each line
- Filter out empty strings (after trim)
- Assign sequential order: 0, 1, 2...
- Preserve crypto.randomUUID() for IDs

**Submission:**
- When form submits, if in bulk mode, parse bulkText to items array first
- Use same validation: at least 1 item required

**Styling:**
- Match existing Tailwind classes: dark mode support (dark:bg-gray-800, dark:text-gray-100)
- Toggle button: blue on white/dark background
- Textarea: full width, border, rounded, padding matching inputs
  </action>
  <verify>
npm run build completes without TypeScript errors
Inspect app/components/TemplateForm.tsx contains isBulkMode state, toggle button, textarea conditional rendering, and text parsing logic
  </verify>
  <done>
TemplateForm component has working bulk text mode toggle. Switching modes converts between text and items array. Textarea accepts multi-line input and parses to items on form submit or mode switch.
  </done>
</task>

</tasks>

<verification>
Build verification:
- npm run build completes successfully
- No TypeScript errors in TemplateForm.tsx
- Component export remains unchanged (default export)

Code verification:
- isBulkMode state exists
- Toggle button renders in both modes
- Textarea renders when isBulkMode === true
- Individual inputs render when isBulkMode === false
- Text parsing splits by newline, trims, filters empty
- Mode switching syncs data bidirectionally
</verification>

<success_criteria>
- TemplateForm component modified with bulk text mode toggle
- Toggle button switches between individual and bulk modes
- Bulk mode shows textarea accepting multi-line text
- Individual mode shows existing UI (unchanged)
- Parsing logic: split by newline, trim, filter empty lines
- Each line becomes one item with sequential order
- Mode switching preserves all items
- Form submission works from both modes
- Dark mode styling applied to new UI elements
- TypeScript types correct throughout
</success_criteria>

<output>
After completion, create `.planning/phases/05-power-user-ux/05-01-SUMMARY.md`
</output>
