---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - next.config.js
  - app/layout.tsx
  - app/page.tsx
  - tailwind.config.ts
  - postcss.config.js
  - app/globals.css
  - prisma/schema.prisma
  - .env.example
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "Development server starts without errors"
    - "Root page loads in browser"
    - "Database connection is configured"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "next"
    - path: "app/layout.tsx"
      provides: "Root layout component"
      min_lines: 10
    - path: "app/page.tsx"
      provides: "Home page component"
      min_lines: 5
    - path: "prisma/schema.prisma"
      provides: "Database schema definition"
      contains: "datasource db"
    - path: "tailwind.config.ts"
      provides: "Tailwind configuration"
      contains: "content"
  key_links:
    - from: "app/layout.tsx"
      to: "app/globals.css"
      via: "import statement"
      pattern: "import.*globals\\.css"
    - from: "app/globals.css"
      to: "tailwind"
      via: "tailwind directives"
      pattern: "@tailwind"
---

<objective>
Set up the foundational web application stack with Next.js, Prisma, and Tailwind CSS.

Purpose: Create the development environment and project structure that all future features will build upon.
Output: A working Next.js application with database ORM configured and styling framework ready.
</objective>

<execution_context>
@./.claude/get-shit-done/workflows/execute-plan.md
@./.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Next.js project with TypeScript</name>
  <files>
    package.json
    tsconfig.json
    next.config.js
    app/layout.tsx
    app/page.tsx
    .gitignore
  </files>
  <action>
Create a new Next.js 14+ project with TypeScript using create-next-app:

```bash
npx create-next-app@latest . --typescript --tailwind --app --no-src-dir --import-alias "@/*"
```

When prompted, select:
- Would you like to use ESLint? Yes
- Would you like to use App Router? Yes
- Would you like to customize the default import alias? No (use @/*)

This creates:
- Next.js App Router structure in app/ directory
- TypeScript configuration
- Tailwind CSS pre-configured
- ESLint setup

Update the default app/page.tsx to be a simple landing page:

```typescript
export default function Home() {
  return (
    <main className="flex min-h-screen flex-col items-center justify-center p-24">
      <h1 className="text-4xl font-bold">Extensible Checklist</h1>
      <p className="mt-4 text-lg text-gray-600">
        Fast, frictionless checklist instantiation
      </p>
    </main>
  );
}
```

Add .env to .gitignore if not already present.
  </action>
  <verify>
Run `npm run dev` and verify the server starts without errors. Open http://localhost:3000 and confirm the landing page renders with the heading and description.
  </verify>
  <done>
Next.js development server runs successfully, landing page displays "Extensible Checklist" heading with Tailwind styling applied.
  </done>
</task>

<task type="auto">
  <name>Task 2: Configure Prisma with PostgreSQL</name>
  <files>
    package.json
    prisma/schema.prisma
    .env.example
  </files>
  <action>
Install Prisma as a development dependency:

```bash
npm install -D prisma
npm install @prisma/client
```

Initialize Prisma with PostgreSQL:

```bash
npx prisma init --datasource-provider postgresql
```

This creates prisma/schema.prisma with PostgreSQL datasource and a .env file.

Update prisma/schema.prisma to include proper configuration:

```prisma
generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```

Create .env.example for documentation:

```
DATABASE_URL="postgresql://user:password@localhost:5432/extensible_checklist?schema=public"
```

Add a note to .env.example explaining users need to copy this to .env and update with their PostgreSQL credentials.

Add the following to package.json scripts:

```json
"db:push": "prisma db push",
"db:studio": "prisma studio",
"db:generate": "prisma generate"
```
  </action>
  <verify>
Run `npx prisma validate` to confirm schema is valid. Verify .env.example exists and contains DATABASE_URL template.
  </verify>
  <done>
Prisma is configured with PostgreSQL datasource, schema file is valid, .env.example documents required environment variable.
  </done>
</task>

<task type="auto">
  <name>Task 3: Create database client utility</name>
  <files>
    lib/db.ts
  </files>
  <action>
Create a singleton Prisma Client instance following Next.js best practices for development hot reload:

Create lib/db.ts:

```typescript
import { PrismaClient } from '@prisma/client'

const globalForPrisma = globalThis as unknown as {
  prisma: PrismaClient | undefined
}

export const db = globalForPrisma.prisma ?? new PrismaClient({
  log: process.env.NODE_ENV === 'development' ? ['query', 'error', 'warn'] : ['error'],
})

if (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = db
```

This prevents multiple Prisma Client instances in development due to Next.js hot reload.

Update .gitignore to include:
```
# Prisma
prisma/*.db
prisma/*.db-journal
```
  </action>
  <verify>
Verify lib/db.ts exports a `db` instance. Run `npx tsc --noEmit` to check TypeScript compilation without errors.
  </verify>
  <done>
Database client utility exists at lib/db.ts, exports singleton Prisma Client instance, TypeScript compiles without errors.
  </done>
</task>

</tasks>

<verification>
1. Run `npm run dev` - server starts on port 3000
2. Visit http://localhost:3000 - landing page renders
3. Run `npx prisma validate` - schema is valid
4. Run `npm run build` - Next.js builds successfully
5. Check files exist: package.json, app/layout.tsx, app/page.tsx, prisma/schema.prisma, lib/db.ts
</verification>

<success_criteria>
- Next.js development server runs without errors
- Landing page loads in browser with Tailwind styling
- Prisma schema is configured and validated
- Database client utility is ready for use
- Project builds successfully with `npm run build`
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
